<div class="row clearfix" *ngIf="verify && !loading">
    <div class="col-xs-12">
        <div class="card">
            <div class="header">
                <h2>
                    Your email has been verified
                    <small>
                        One more step before you can start to use {{ appState.state.title }}, please choose an username
                    </small>
                </h2>
            </div>
            <div class="body">
                <p>
                </p>
                <form [formGroup]="verifyForm" id="form-username">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="material-icons">person</i>
                        </span>
                        <div class="form-line" [class.error]="verifyForm.controls.username.invalid || nameTaken">
                            <input type="text" class="form-control" formControlName="username" placeholder="Username"
                                   required
                                   autofocus
                                   focusedInput
                                   (input)="checkUsernameValidity($event)"
                                   (keydown)="preventChar($event)">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-md-offset-4">
                            <button *ngIf="!submit;"
                                    class="btn btn-block btn-info waves-effect"
                                    type="submit"
                                    name="submit"
                                    (click)="submitUsername(verifyForm.get('username').value)"
                                    [disabled]="verifyForm.invalid || nameTaken"
                            >SET USERNAME
                            </button>
                        </div>
                        <app-spinner-btn *ngIf="submit"></app-spinner-btn>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row clearfix" *ngIf="!verify && !loading">
    <div class="col-xs-12">
        <h1 class="error">No such user</h1>
    </div>
</div>

<app-loading *ngIf="loading"></app-loading>
